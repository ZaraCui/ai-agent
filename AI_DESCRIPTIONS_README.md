# 🤖 AI景点描述生成 - 快速指南

## 问题描述

原有的景点描述过于同质化，使用模板化的格式：
```
这是昆明的一个自然景点XXX，是一个著名景点 | 位于：XXX | 景点类型：XXX | 建议游览时间：2小时
```

## 解决方案

集成ChatGPT API，使用AI为每个景点生成独特、生动的描述文本。

## 🚀 快速开始

### 1. 配置API密钥

编辑`.env`文件，添加你的OpenAI API密钥：

```bash
OPENAI_API_KEY=sk-your-api-key-here
```

**获取密钥：** https://platform.openai.com/api-keys

### 2. 测试环境

```bash
python scripts/test_ai_description.py
```

这会检查：
- ✅ API密钥是否配置
- ✅ OpenAI库是否安装（已在requirements.txt中）
- ✅ 数据文件是否存在
- ✅ 示例景点数据

### 3. 生成描述（预览模式）

```bash
python scripts/generate_ai_descriptions.py
```

**推荐首次使用配置：**
- 城市: `kunming`（或其他单个城市）
- 数量: `5`（先测试少量）
- 风格: `6`（随机）
- 模型: `1`（gpt-3.5-turbo）
- 预览: `y`（预览模式，不保存）

### 4. 正式生成

确认效果满意后，重新运行并选择 `n`（不预览，直接保存）

## 📁 文件说明

### 新增/修改的文件

1. **`.env`** - 添加了 `OPENAI_API_KEY` 配置项
2. **`scripts/generate_ai_descriptions.py`** - AI描述生成主脚本
3. **`scripts/test_ai_description.py`** - 环境测试脚本
4. **`docs/AI_DESCRIPTION_GENERATOR.md`** - 详细使用文档
5. **`AI_DESCRIPTIONS_README.md`** - 本快速指南

### 已存在的相关文件

- **`scripts/improve_descriptions.py`** - 旧的基于模板的描述改进脚本
- **`data/spots_*.json`** - 景点数据文件（将被更新）

## ✨ 功能特性

### 5种描述风格

1. **简洁实用** - 信息密集，突出实用信息
2. **文艺优美** - 优美的文学化描述
3. **历史文化** - 强调历史文化背景
4. **生活体验** - 从游客体验角度描述
5. **地理特色** - 强调地理和自然特色
6. **随机模式** - 为每个景点随机选择（推荐）

### 智能提示词设计

- ✅ 避免模板化开头（如"这是..."）
- ✅ 突出景点独特性
- ✅ 包含实用信息
- ✅ 语言生动自然
- ✅ 长度适中（80-150字）

### 灵活配置

- 选择特定城市或全部城市
- 控制处理数量
- 选择AI模型（gpt-3.5/gpt-4）
- 预览模式（不保存）
- 支持断点续传

## 📊 效果对比

### 原始描述
```
这是昆明的一个自然景点白龙潭公园，是一个著名景点 | 位于：锦绣大街 | 
景点类型：风景名胜 | 建议游览时间：2小时
```

### AI生成（简洁实用风格）
```
白龙潭公园是昆明市区内难得的山水园林，以清澈的龙潭和古树名木著称。
公园内有多处泉眼，水质清冽，四季常流。适合周末休闲散步，也是摄影
爱好者的好去处。建议游览2小时，春季樱花盛开时最美。
```

### AI生成（文艺优美风格）
```
白龙潭公园藏于城市一隅，泉水叮咚，古树参天。潭水碧绿如镜，倒映着
四季变换的景致。漫步林间小径，听鸟语闻花香，仿佛置身世外桃源。这里
是都市人寻找宁静的理想之地，每个季节都有独特的韵味。
```

## 💰 费用估算

使用gpt-3.5-turbo模型：
- 每个景点：约 $0.001-0.002
- 100个景点：约 $0.10-0.20
- 1000个景点：约 $1.00-2.00

**建议**：先小规模测试，确认效果后再批量处理

## ⚠️ 注意事项

1. **备份数据**：批量处理前备份`data`目录
2. **API限制**：脚本内置1秒延迟，避免速率限制
3. **费用控制**：建议分批处理，设置数量上限
4. **质量检查**：处理后抽查几个景点的描述质量

## 🎯 推荐使用流程

```
1. 测试环境
   → python scripts/test_ai_description.py

2. 小规模测试（预览模式）
   → python scripts/generate_ai_descriptions.py
   → 城市: kunming, 数量: 5, 预览: y

3. 检查生成质量
   → 查看输出的新旧描述对比

4. 正式生成
   → python scripts/generate_ai_descriptions.py
   → 选择目标城市，预览: n

5. 批量处理（可选）
   → 处理多个城市或所有城市
```

## 📚 详细文档

完整的使用指南、高级配置、常见问题等，请查看：

**`docs/AI_DESCRIPTION_GENERATOR.md`**

## 🔧 技术实现

### 核心技术栈
- **OpenAI API**: GPT-3.5-turbo / GPT-4
- **Python**: 3.7+
- **依赖库**: openai, python-dotenv

### 脚本架构
```
generate_ai_descriptions.py
├── get_openai_client()      # 初始化API客户端
├── generate_spot_description()  # 生成单个景点描述
├── process_city_spots()     # 批量处理城市景点
└── main()                   # 交互式主函数
```

### 提示词工程
脚本使用精心设计的提示词（prompt），包含：
- 系统角色定义（专业旅游文案专家）
- 景点信息（名称、城市、类别、时长）
- 风格要求
- 内容规范（长度、语言、避免模板化等）

## 🤝 与现有系统集成

### 数据流
```
现有景点数据 (data/spots_*.json)
    ↓
AI描述生成 (scripts/generate_ai_descriptions.py)
    ↓
更新的景点数据 (同一文件，原地更新)
    ↓
旅行规划系统使用 (agent/planner.py等)
```

### 兼容性
- ✅ 不改变数据结构，仅更新`description`字段
- ✅ 保留其他字段（name, category, lat, lon等）
- ✅ 向后兼容，不影响现有功能

## 📞 支持

遇到问题？检查以下几点：

1. ✅ API密钥是否正确配置
2. ✅ 网络是否可以访问OpenAI API
3. ✅ 账户是否有余额
4. ✅ Python依赖是否正确安装

## 🎉 总结

通过集成ChatGPT API，现在可以为所有景点生成：
- ✨ 独特且多样化的描述
- 🎨 多种风格（简洁、文艺、历史、体验、地理）
- 🚀 自动化批量处理
- 💰 成本可控（约$1-2/千个景点）
- 🔧 灵活配置和预览

**立即开始：** `python scripts/test_ai_description.py`
